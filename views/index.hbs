<div class="row mt-3 container w-50 m-auto">
  <form action="/filter" id="filter">
    <div class="input-group w-50 m-auto">
      <select class="form-select" id="category" name="category">
        <option value="類別">類別</option>
        <option value="家居物業" {{#if (equal categoryFiltered "家居物業" )}}selected{{/if}}>家居物業</option>
        <option value="交通出行" {{#if (equal categoryFiltered "交通出行" )}}selected{{/if}}>交通出行</option>
        <option value="休閒娛樂" {{#if (equal categoryFiltered "休閒娛樂" )}}selected{{/if}}>休閒娛樂</option>
        <option value="餐飲食品" {{#if (equal categoryFiltered "餐飲食品" )}}selected{{/if}}>餐飲食品</option>
        <option value="其他" {{#if (equal categoryFiltered "其他" )}}selected{{/if}}>其他</option>
      </select>
    </div>
  </form>

  <div class="row mt-2 w-50 m-auto">
    <span class="w-50 m-auto">總金額：</span>
    <span class="w-50 m-auto" style="font-size: 50px; color: rgb(211, 199, 31)">
      {{ totalAmount }}
    </span>
  </div>

  <div class="row mt-3">

    {{#each recordList}}
    <div class="mt-3 d-flex justify-content-between align-items-center">
      <div class="d-flex align-items-center">
        <i class="me-2 fa-2xl fa-solid {{ this.icon }}"></i>
        <div>
          <h5 class="mb-0">{{ this.name }}</h5>
          <p class="mb-0">{{ this.date }}</p>
        </div>
      </div>
      <div class="d-flex align-items-center">
        <p class="mb-0 mx-3">{{ this.amount }}</p>
        <a href="/records/{{ this._id }}/edit" class="btn btn-outline-info mx-2">修改</a>
        <form action="/records/{{ this._id }}?_method=DELETE" method="POST">
          <button type="submit" class="btn btn-outline-danger">刪除</button>
        </form>
      </div>
    </div>
    {{/each}}

  </div>

  <div class="row w-25 m-auto mt-5">
    <a href="/records/new" class="btn btn-warning mb-5">新增支出</a>
  </div>

</div>

<script>
  const categorySelect = document.querySelector('#category')
  const filter = document.querySelector('#filter')

  // 當下拉式選單改變時，送出表單
  categorySelect.addEventListener('change', event => {
    filter.submit()
  })
</script>